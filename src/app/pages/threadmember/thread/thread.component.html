<div class="p-8">
    <p-tabView>
        <p-tabPanel header="Thread" leftIcon="pi pi-book" >
            <div class="glasses p-3 border-round mb-8" *ngFor="let thread of threadHeader.data; let i = index">
                <div class="flex">
                    <div>
                        <p-avatar *ngIf="thread.userPhoto === null" icon="pi pi-user" styleClass="mr-2" size="large" [style]="{'background-color':'#2196F3', 'color': '#ffffff'}" shape="circle"></p-avatar>
                        <p-avatar *ngIf="thread.userPhoto !== null" image="http://localhost:1234/files/{{thread.userPhoto}}" styleClass="mr-2" size="large" [style]="{'background-color':'#2196F3', 'color': '#ffffff'}" shape="circle"></p-avatar>
                    </div>
                    <div>
                        <h4>{{thread.fullName}}</h4>
                        <p>{{thread.createdAt | timeAgo}}</p>
                    </div>
                </div>
                <div class="mt-3">
                    <p class="font-bold">
                       {{thread.title}}
                    </p>
                    <p>
                       {{thread.contentThread | slice:sliceOptions.start:sliceOptions.end}} ... <a *ngIf="thread.threadType === 'Regular'" (click)="onExpandText($event, thread.id)" class="cursor-pointer">See More </a> <a *ngIf="thread.threadType === 'Premium' && showType === false" (click)="onExpandTextPremium($event)">See More <i class="pi pi-fw pi-lock text-red-500cursor-pointer"></i> </a>
                    </p>
                </div>
                <div *ngIf="thread.fileId != null"> 
                    <img src="http://localhost:1234/files/{{thread.fileId}}" alt="" width="400px" height="200px">
                </div>
                <div>
                    <div>
                        <div class="flex justify-content-between mt-8 align-items-center">
                            <div class="flex w-1 justify-content-around">
                                <div class="flex justify-content-center align-items-center mx-2">
                                    <a (click)="like(thread.id)" class="cursor-pointer mr-1" *ngIf="thread.isLike === false"><i class="pi pi-heart"></i></a>
                                    <a (click)="unLike(thread.id)" *ngIf="thread.isLike === true" class="cursor-pointer mr-1"><i class="pi pi-heart-fill text-red-500"></i></a>
                                    <p>{{thread.countLike}}</p>
                                </div>
                                <div class="flex justify-content-center align-items-center">
                                    <i class="pi pi-comment  mr-1"></i>
                                    <p>{{thread.countComment}}</p>
                                </div>
                            </div>
                            <div>
                                <a (click)="bookmark(thread.id)" *ngIf="thread.isBookmark === false" class="cursor-pointer"><i class="pi pi-bookmark"></i></a>
                                <a (click)="unBookmark(thread.id)" *ngIf="thread.isBookmark === true" class="cursor-pointer"><i class="pi pi-bookmark-fill text-yellow-400"></i></a>
                            </div>
                          
                        </div>
                        <div>

                        </div>
                    </div>
                </div>
               
            </div>
            <div class="glasses p-3 border-round mb-8 cursor-pointer" *ngFor="let polling of threadPollingHeader.data">
                <div class="flex">
                    <div>
                        <p-avatar icon="pi pi-user" styleClass="mr-2" size="large" [style]="{'background-color':'#2196F3', 'color': '#ffffff'}" shape="circle"></p-avatar>
                    </div>
                    <div>
                        <h4>Salman Faris Siddiq</h4>
                        <p>Upload 1 hour ago</p>
                    </div>
                </div>
                <div class="mt-3 mb-3">
                    <p class="font-bold">
                       
                    </p>
                    <p>
                        {{polling.titlePolling}}
                    </p>
                    <p class="font-bold">
                        {{polling.contentPolling}}
                     </p> 
                </div>
                <div class="border-1 border-solid p-3 border-round">
                    <p class="font-bold">
                       {{polling.pollingQuestion}}
                    </p> 
                    <div class="mt-5" *ngFor="let answer of polling.threadDtlPolling">
                        <div>
                            <button pButton *ngIf="polling.isChoice === false" [label]="answer.pollingChoice" (click)="chooseAnswer(answer.id)"  class="w-full"></button>
                        
                                <button *ngIf="polling.isChoice === true"   pButton class="w-full bg-blue-900 buttonAnswer" ><p>{{(answer.countAnswer / polling.countAllAnswer) * 100}}%</p></button>
                       
                           
                        </div> 
                    </div>
                   
                </div>
                <div>
                    <div>
                        <div class="flex justify-content-between mt-8 align-items-center">
                            <div class="flex w-1 justify-content-around">
                                <div class="flex">
                                    <i class="pi pi-heart-fill"></i>
                                    <p>5</p>
                                </div>
                           
                            </div>
                            <div>
                                <i class="pi pi-bookmark-fill"></i>
                            </div>
                          
                        </div>
                        <div>

                        </div>
                    </div>
                </div>
            </div>
        </p-tabPanel>
        <p-tabPanel header="Like" leftIcon="pi pi-heart-fill">
            <div class="glasses p-3 border-round mb-8" *ngFor="let threadLike of threadHeaderLike.data; let i = index">
                <div class="flex">
                    <div>
                        <p-avatar *ngIf="threadLike.userPhoto === null" icon="pi pi-user" styleClass="mr-2" size="large" [style]="{'background-color':'#2196F3', 'color': '#ffffff'}" shape="circle"></p-avatar>
                        <p-avatar *ngIf="threadLike.userPhoto !== null" image="http://localhost:1234/files/{{threadLike.userPhoto}}" styleClass="mr-2" size="large" [style]="{'background-color':'#2196F3', 'color': '#ffffff'}" shape="circle"></p-avatar>
                    </div>
                    <div>
                        <h4>{{threadLike.fullName}}</h4>
                        <p>{{threadLike.createdAt | timeAgo}}</p>
                    </div>
                </div>
                <div class="mt-3">
                    <p class="font-bold">
                       {{threadLike.title}}
                    </p>
                    <p>
                       {{threadLike.contentThread | slice:sliceOptions.start:sliceOptions.end}} ... <a *ngIf="threadLike.threadType === 'Regular'" (click)="onExpandText($event, threadLike.id)" class="cursor-pointer">See More </a> <a *ngIf="threadLike.threadType === 'Premium' && showType === false" (click)="onExpandTextPremium($event)">See More <i class="pi pi-fw pi-lock text-red-500cursor-pointer"></i> </a>
                    </p>
                </div>
                <div *ngIf="threadLike.fileId != null"> 
                    <img src="http://localhost:1234/files/{{threadLike.fileId}}" alt="" width="400px" height="200px">
                </div>
                <div>
                    <div>
                        <div class="flex justify-content-between mt-8 align-items-center">
                            <div class="flex w-1 justify-content-around">
                                <div class="flex justify-content-center align-items-center mx-2">
                                    <a (click)="like(threadLike.id)" class="cursor-pointer mr-1" *ngIf="threadLike.isLike === false"><i class="pi pi-heart"></i></a>
                                    <a (click)="unLike(threadLike.id)" *ngIf="threadLike.isLike === true" class="cursor-pointer mr-1"><i class="pi pi-heart-fill text-red-500"></i></a>
                                    <p>{{threadLike.countLike}}</p>
                                </div>
                                <div class="flex justify-content-center align-items-center">
                                    <i class="pi pi-comment  mr-1"></i>
                                    <p>{{threadLike.countComment}}</p>
                                </div>
                            </div>
                            <div>
                                <a (click)="bookmark(threadLike.id)" *ngIf="threadLike.isBookmark === false" class="cursor-pointer"><i class="pi pi-bookmark"></i></a>
                                <a (click)="unBookmark(threadLike.id)" *ngIf="threadLike.isBookmark === true" class="cursor-pointer"><i class="pi pi-bookmark-fill text-yellow-400"></i></a>
                            </div>
                          
                        </div>
                        <div>

                        </div>
                    </div>
                </div>
               
            </div>
        </p-tabPanel>
        <p-tabPanel header="Bookmark" leftIcon="pi pi-bookmark-fill">
            <div class="glasses p-3 border-round mb-8 " *ngFor="let threadBookmark of threadHeaderBookmark.data; let i = index">
                <div class="flex">
                    <div>
                        <p-avatar *ngIf="threadBookmark.userPhoto === null" icon="pi pi-user" styleClass="mr-2" size="large" [style]="{'background-color':'#2196F3', 'color': '#ffffff'}" shape="circle"></p-avatar>
                        <p-avatar *ngIf="threadBookmark.userPhoto !== null" image="http://localhost:1234/files/{{threadBookmark.userPhoto}}" styleClass="mr-2" size="large" [style]="{'background-color':'#2196F3', 'color': '#ffffff'}" shape="circle"></p-avatar>
                    </div>
                    <div>
                        <h4>{{threadBookmark.fullName}}</h4>
                        <p>{{threadBookmark.createdAt | timeAgo}}</p>
                    </div>
                </div>
                <div class="mt-3">
                    <p class="font-bold">
                       {{threadBookmark.title}}
                    </p>
                    <p>
                       {{threadBookmark.contentThread | slice:sliceOptions.start:sliceOptions.end}} ... <a *ngIf="threadBookmark.threadType === 'Regular'" (click)="onExpandText($event, threadBookmark.id)" class="cursor-pointer">See More </a> <a *ngIf="threadBookmark.threadType === 'Premium' && showType === false" (click)="onExpandTextPremium($event)">See More <i class="pi pi-fw pi-lock text-red-500cursor-pointer"></i> </a>
                    </p>
                </div>
                <div *ngIf="threadBookmark.fileId != null"> 
                    <img src="http://localhost:1234/files/{{threadBookmark.fileId}}" alt="" width="400px" height="200px">
                </div>
                <div>
                    <div>
                        <div class="flex justify-content-between mt-8 align-items-center">
                            <div class="flex w-1 justify-content-around">
                                <div class="flex justify-content-center align-items-center mx-2">
                                    <a (click)="like(threadBookmark.id)" class="cursor-pointer mr-1" *ngIf="threadBookmark.isLike === false"><i class="pi pi-heart"></i></a>
                                    <a (click)="unLike(threadBookmark.id)" *ngIf="threadBookmark.isLike === true" class="cursor-pointer mr-1"><i class="pi pi-heart-fill text-red-500"></i></a>
                                    <p>{{threadBookmark.countLike}}</p>
                                </div>
                                <div class="flex justify-content-center align-items-center">
                                    <i class="pi pi-comment  mr-1"></i>
                                    <p>{{threadBookmark.countComment}}</p>
                                </div>
                            </div>
                            <div>
                                <a (click)="bookmark(threadBookmark.id)" *ngIf="threadBookmark.isBookmark === false" class="cursor-pointer"><i class="pi pi-bookmark"></i></a>
                                <a (click)="unBookmark(threadBookmark.id)" *ngIf="threadBookmark.isBookmark === true" class="cursor-pointer"><i class="pi pi-bookmark-fill text-yellow-400"></i></a>
                            </div>
                          
                        </div>
                        <div>

                        </div>
                    </div>
                </div>
               
            </div>
        </p-tabPanel>
        <p-tabPanel header="Create Thread" leftIcon="pi pi-file">
            <form (ngSubmit)="onsubmit()">
                <div>
                    <h3>Title</h3>
                    <div class="w-full">
                        <textarea pInputTextarea rows="5" cols="10" class="w-full" name="title" [(ngModel)]="data.title"></textarea>
                    </div>
                   </div>
                   <div>
                    <h3>Description</h3>
                    <div class="w-full">
                        <textarea pInputTextarea rows="10" cols="10" class="w-full" name="contentHeader" [(ngModel)]="data.contentThread"></textarea>
                    </div>
                   </div>
                   <div *ngIf="threadTypeShow && showType === true">
                    <p-dropdown [options]="threadType.data!" [(ngModel)]="data.threadTypeId" class="w-30rem" [style]="{'width':'100vh'}" placeholder="threadType" optionLabel="threadType" optionValue="id"  name="threadTypeId" [showClear]="true">
                        <ng-template pTemplate="item" let-threadType>
                          <div>
                            {{threadType.threadType}}
                          </div>
                        </ng-template>
                    </p-dropdown>
                   </div>
                   <div *ngIf="polling" class="glasses border-round mb-3 flex flex-column justify-content-center">
                    <div class="w-full flex justify-content-end">
                        <button icon="pi pi-times" class="p-button-rounded p-button-danger p-button-outlined" pButton (click)="exitPolling()"></button>
                    </div>
                    <div class="w-full flex  justify-content-center">
                        <input type="text" name="pollingQuestion" [(ngModel)]="insertPolling.pollingQuestion" pInputText class="inputstyle" placeholder="your question">
                    </div>
                    <div *ngFor="let polling of pollingArray.controls; last as isLast; index as idx;let i = index " class="flex justify-content-center">
                    
                        <div class="w-30rem p-3 flex flex-column">
                            <div>
                                <label>Input {{i+1}}</label>
                            </div>
                          <div class="flex gap-2">
                            <input type="text" name="pollingChoice"  pInputText [formControl]="polling" class="inputstyle" >
                            <button pButton pRipple type="button" icon="pi pi-times" class="p-button-rounded p-button-danger" (click)="removeInputControl(idx)" *ngIf="pollingArray.length > 1"></button>
                            <button pButton pRipple type="button" icon="pi pi-plus" class="p-button-rounded" *ngIf="isLast && pollingArray.length < 4" (click)="addInputControl()"></button>
                          </div>
                         
                        </div>
                   </div>
                   <div class="field col-12 md:col-4 flex flex-column align-items-center  w-full">
                    <label for="icon">Input Poll Length</label>
                    <p-calendar [showIcon]="true" inputId="icon" name="duration" [(ngModel)]="insertPolling.duration"></p-calendar>
                </div>
                   </div>
                
                   <div class="flex justify-content-between">
                    <div class="flex gap-2">
                        <p-fileUpload mode="basic" chooseIcon="pi pi-image" name="file" [customUpload]="true" id="file" (uploadHandler)="onInsertFile($event)" [auto]="true"></p-fileUpload>
                        <button pButton pRipple type="button" icon="pi pi-chart-bar" class="p-button-rounded bg-red-500" (click)="clickPolling()"></button>
                    </div>
                    <button pButton label="create thread" icon="pi pi-book" class="bg-red-500"></button>
                   </div>
            </form>
           
        </p-tabPanel>
    </p-tabView>
</div>
